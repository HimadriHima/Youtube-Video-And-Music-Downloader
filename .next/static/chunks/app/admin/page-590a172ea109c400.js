(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1614:function(t,e,a){Promise.resolve().then(a.bind(a,9725))},9725:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return o}});var i=a(7437),n=a(2265);function o(){let[t,e]=(0,n.useState)(!1),[a,o]=(0,n.useState)(""),[l,s]=(0,n.useState)(""),[d,r]=(0,n.useState)(""),[c,h]=(0,n.useState)(!1),[u,f]=(0,n.useState)(""),[x,p]=(0,n.useState)(!1),[w,y]=(0,n.useState)("");async function m(){try{let t=await fetch("/api/admin/me"),e=await t.json();p(!!(null==e?void 0:e.authenticated))}catch(t){}try{let t=await fetch("/api/admin/cookie"),a=await t.json();if(e(!!(null==a?void 0:a.hasCookie)),null==a?void 0:a.lastUpdatedMs){let t=new Date(a.lastUpdatedMs);o(t.toLocaleString())}else o("")}catch(t){}}async function v(t){h(!0),f("");try{let e=await fetch("/api/admin/cookie",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error(await e.text());f("Saved"),s(""),r(""),await m()}catch(t){f((null==t?void 0:t.message)||"Failed")}finally{h(!1)}}async function g(){l.trim()&&await v({cookieHeader:l})}async function j(){d.trim()&&await v({cookiesTxt:d})}async function k(t){var e;let a=null===(e=t.target.files)||void 0===e?void 0:e[0];if(a){h(!0),f("");try{let t=await a.text(),e=await fetch("/api/admin/cookie",{method:"POST",headers:{"Content-Type":"text/plain"},body:t});if(!e.ok)throw Error(await e.text());f("Uploaded"),await m()}catch(t){f((null==t?void 0:t.message)||"Failed")}finally{h(!1),t.currentTarget.value=""}}}async function S(){h(!0),f("");try{let t=await fetch("/api/admin/cookie",{method:"DELETE"});if(!t.ok)throw Error(await t.text());f("Deleted"),await m()}catch(t){f((null==t?void 0:t.message)||"Failed")}finally{h(!1)}}return((0,n.useEffect)(()=>{m()},[]),x)?(0,i.jsxs)("div",{style:{maxWidth:800,margin:"40px auto",padding:16},children:[(0,i.jsx)("h2",{children:"Admin: YouTube Cookie"}),(0,i.jsxs)("p",{children:["Status: ",t?"Cookie Saved":"No Cookie Saved"," ",a?"(Updated: ".concat(a,")"):""]}),u&&(0,i.jsx)("p",{children:u}),(0,i.jsxs)("div",{style:{display:"grid",gap:16},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Paste Cookie Header (single line):"}),(0,i.jsx)("textarea",{value:l,onChange:t=>s(t.target.value),rows:3,style:{width:"100%"}}),(0,i.jsx)("button",{onClick:g,disabled:c||!l.trim(),children:"Save Header"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Paste cookies.txt (Netscape format):"}),(0,i.jsx)("textarea",{value:d,onChange:t=>r(t.target.value),rows:6,style:{width:"100%"}}),(0,i.jsx)("button",{onClick:j,disabled:c||!d.trim(),children:"Save cookies.txt"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Upload cookies.txt file:"}),(0,i.jsx)("input",{type:"file",accept:".txt",onChange:k})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{onClick:S,disabled:c||!t,children:"Delete Saved Cookie"})}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{onClick:async()=>{h(!0),f("");try{let t=await fetch("/api/admin/logout",{method:"POST"});if(!t.ok)throw Error(await t.text());await m()}catch(t){f((null==t?void 0:t.message)||"Failed")}finally{h(!1)}},children:"Logout"})})]})]}):(0,i.jsx)(function(){return(0,i.jsxs)("div",{style:{maxWidth:400,margin:"40px auto",padding:16},children:[(0,i.jsx)("h2",{children:"Admin Login"}),(0,i.jsx)("p",{children:"Enter admin password to continue."}),(0,i.jsx)("input",{type:"password",value:w,onChange:t=>y(t.target.value),placeholder:"Password",style:{width:"100%",marginBottom:8}}),(0,i.jsx)("button",{disabled:!w.trim()||c,onClick:async()=>{h(!0),f("");try{let t=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:w})});if(!t.ok)throw Error(await t.text());y(""),await m()}catch(t){f((null==t?void 0:t.message)||"Login failed")}finally{h(!1)}},children:"Login"}),u&&(0,i.jsx)("p",{children:u})]})},{})}}},function(t){t.O(0,[971,117,744],function(){return t(t.s=1614)}),_N_E=t.O()}]);