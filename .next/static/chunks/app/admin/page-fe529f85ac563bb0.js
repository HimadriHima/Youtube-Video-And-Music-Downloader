(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1614:function(e,t,i){Promise.resolve().then(i.bind(i,9725))},9725:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return n}});var a=i(7437),o=i(2265);function n(){let[e,t]=(0,o.useState)(!1),[i,n]=(0,o.useState)(""),[l,r]=(0,o.useState)(""),[s,d]=(0,o.useState)(""),[c,h]=(0,o.useState)(!1),[u,x]=(0,o.useState)(""),[p,j]=(0,o.useState)(!1),[f,v]=(0,o.useState)(""),[y,m]=(0,o.useState)(!1);async function g(){try{let e=await fetch("/api/admin/me"),t=await e.json();j(!!(null==t?void 0:t.authenticated))}catch(e){}try{let e=await fetch("/api/admin/cookie"),i=await e.json();if(t(!!(null==i?void 0:i.hasCookie)),null==i?void 0:i.lastUpdatedMs){let e=new Date(i.lastUpdatedMs);n(e.toLocaleString())}else n("")}catch(e){}}async function w(e){h(!0),x("");try{let t=await fetch("/api/admin/cookie",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text());x("Saved"),r(""),d(""),await g()}catch(e){x((null==e?void 0:e.message)||"Failed")}finally{h(!1)}}async function k(){l.trim()&&await w({cookieHeader:l})}async function b(){s.trim()&&await w({cookiesTxt:s})}async function C(e){var t;let i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(i){h(!0),x("");try{let e=await i.text(),t=await fetch("/api/admin/cookie",{method:"POST",headers:{"Content-Type":"text/plain"},body:e});if(!t.ok)throw Error(await t.text());x("Uploaded"),await g()}catch(e){x((null==e?void 0:e.message)||"Failed")}finally{h(!1),e.currentTarget.value=""}}}async function S(){h(!0),x("");try{let e=await fetch("/api/admin/cookie",{method:"DELETE"});if(!e.ok)throw Error(await e.text());x("Deleted"),await g()}catch(e){x((null==e?void 0:e.message)||"Failed")}finally{h(!1)}}return((0,o.useEffect)(()=>{g(),m(window.location.hostname.includes("vercel.app")||window.location.hostname.includes("vercel.com"))},[]),p)?y?(0,a.jsxs)("div",{style:{maxWidth:800,margin:"40px auto",padding:16},children:[(0,a.jsx)("h2",{children:"Admin: YouTube Cookie (Vercel)"}),(0,a.jsxs)("p",{children:["Status: ",e?"Cookie Saved":"No Cookie Saved"," ",i?"(Updated: ".concat(i,")"):""]}),u&&(0,a.jsx)("p",{children:u}),(0,a.jsxs)("div",{style:{background:"#f0f0f0",padding:16,borderRadius:8,marginBottom:16},children:[(0,a.jsx)("h3",{children:"⚠️ Vercel Deployment Notice"}),(0,a.jsx)("p",{children:"This app is running on Vercel, which doesn't support filesystem storage. To use YouTube cookies:"}),(0,a.jsxs)("ol",{children:[(0,a.jsx)("li",{children:"Parse your cookies.txt or cookie header"}),(0,a.jsx)("li",{children:"Go to your Vercel project dashboard"}),(0,a.jsx)("li",{children:"Settings → Environment Variables"}),(0,a.jsxs)("li",{children:["Add: ",(0,a.jsx)("code",{children:"YT_COOKIE_STORED"})," = ",(0,a.jsx)("code",{children:"your-cookie-header-here"})]}),(0,a.jsx)("li",{children:"Redeploy your app"})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Example:"})," ",(0,a.jsx)("code",{children:"YT_COOKIE_STORED=VISITOR_INFO1_LIVE=abc123; LOGIN_INFO=def456; SID=ghi789"})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gap:16},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Paste Cookie Header (for reference):"}),(0,a.jsx)("textarea",{value:l,onChange:e=>r(e.target.value),rows:3,style:{width:"100%"},placeholder:"Paste your cookie header here to copy to Vercel env var"}),(0,a.jsx)("button",{onClick:()=>{l.trim()&&(navigator.clipboard.writeText(l.trim()),x("Copied to clipboard! Add this as YT_COOKIE_STORED in Vercel env vars."))},disabled:!l.trim(),children:"Copy for Vercel Env Var"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Paste cookies.txt (for reference):"}),(0,a.jsx)("textarea",{value:s,onChange:e=>d(e.target.value),rows:6,style:{width:"100%"},placeholder:"Paste your cookies.txt here to parse and copy header"}),(0,a.jsx)("button",{onClick:()=>{if(s.trim()){let e=s.split("\n"),t=[];e.forEach(e=>{let i=e.split("	");if(i.length>=7){let e=i[5],a=i[6];e&&a&&t.push("".concat(e,"=").concat(a))}});let i=t.join("; ");i?(navigator.clipboard.writeText(i),x("Parsed and copied to clipboard! Add this as YT_COOKIE_STORED in Vercel env vars.")):x("Failed to parse cookies.txt")}},disabled:!s.trim(),children:"Parse & Copy for Vercel"})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:async()=>{h(!0),x("");try{let e=await fetch("/api/admin/logout",{method:"POST"});if(!e.ok)throw Error(await e.text());await g()}catch(e){x((null==e?void 0:e.message)||"Failed")}finally{h(!1)}},children:"Logout"})})]})]}):(0,a.jsxs)("div",{style:{maxWidth:800,margin:"40px auto",padding:16},children:[(0,a.jsx)("h2",{children:"Admin: YouTube Cookie"}),(0,a.jsxs)("p",{children:["Status: ",e?"Cookie Saved":"No Cookie Saved"," ",i?"(Updated: ".concat(i,")"):""]}),u&&(0,a.jsx)("p",{children:u}),(0,a.jsxs)("div",{style:{display:"grid",gap:16},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Paste Cookie Header (single line):"}),(0,a.jsx)("textarea",{value:l,onChange:e=>r(e.target.value),rows:3,style:{width:"100%"}}),(0,a.jsx)("button",{onClick:k,disabled:c||!l.trim(),children:"Save Header"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Paste cookies.txt (Netscape format):"}),(0,a.jsx)("textarea",{value:s,onChange:e=>d(e.target.value),rows:6,style:{width:"100%"}}),(0,a.jsx)("button",{onClick:b,disabled:c||!s.trim(),children:"Save cookies.txt"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Upload cookies.txt file:"}),(0,a.jsx)("input",{type:"file",accept:".txt",onChange:C})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:S,disabled:c||!e,children:"Delete Saved Cookie"})}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:async()=>{h(!0),x("");try{let e=await fetch("/api/admin/logout",{method:"POST"});if(!e.ok)throw Error(await e.text());await g()}catch(e){x((null==e?void 0:e.message)||"Failed")}finally{h(!1)}},children:"Logout"})})]})]}):(0,a.jsx)(function(){return(0,a.jsxs)("div",{style:{maxWidth:400,margin:"40px auto",padding:16},children:[(0,a.jsx)("h2",{children:"Admin Login"}),(0,a.jsx)("p",{children:"Enter admin password to continue."}),(0,a.jsx)("input",{type:"password",value:f,onChange:e=>v(e.target.value),placeholder:"Password",style:{width:"100%",marginBottom:8}}),(0,a.jsx)("button",{disabled:!f.trim()||c,onClick:async()=>{h(!0),x("");try{let e=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:f})});if(!e.ok)throw Error(await e.text());v(""),await g()}catch(e){x((null==e?void 0:e.message)||"Login failed")}finally{h(!1)}},children:"Login"}),u&&(0,a.jsx)("p",{children:u})]})},{})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1614)}),_N_E=e.O()}]);