(()=>{var e={};e.id=753,e.ids=[753],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},5315:e=>{"use strict";e.exports=require("path")},6624:e=>{"use strict";e.exports=require("querystring")},6162:e=>{"use strict";e.exports=require("stream")},4026:e=>{"use strict";e.exports=require("string_decoder")},5346:e=>{"use strict";e.exports=require("timers")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},153:e=>{"use strict";e.exports=require("util")},1520:e=>{"use strict";e.exports=require("vm")},8061:e=>{"use strict";e.exports=require("node:assert")},2761:e=>{"use strict";e.exports=require("node:async_hooks")},2254:e=>{"use strict";e.exports=require("node:buffer")},27:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},5714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},604:e=>{"use strict";e.exports=require("node:dns")},5673:e=>{"use strict";e.exports=require("node:events")},3977:e=>{"use strict";e.exports=require("node:fs/promises")},8849:e=>{"use strict";e.exports=require("node:http")},2725:e=>{"use strict";e.exports=require("node:http2")},7503:e=>{"use strict";e.exports=require("node:net")},9411:e=>{"use strict";e.exports=require("node:path")},8846:e=>{"use strict";e.exports=require("node:perf_hooks")},5815:e=>{"use strict";e.exports=require("node:querystring")},5467:e=>{"use strict";e.exports=require("node:sqlite")},4492:e=>{"use strict";e.exports=require("node:stream")},2332:e=>{"use strict";e.exports=require("node:timers")},1764:e=>{"use strict";e.exports=require("node:tls")},7261:e=>{"use strict";e.exports=require("node:util")},3746:e=>{"use strict";e.exports=require("node:util/types")},4086:e=>{"use strict";e.exports=require("node:worker_threads")},5628:e=>{"use strict";e.exports=require("node:zlib")},7529:()=>{},3492:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>q,patchFetch:()=>y,requestAsyncStorage:()=>h,routeModule:()=>x,serverHooks:()=>w,staticGenerationAsyncStorage:()=>v});var s={};r.r(s),r.d(s,{GET:()=>m,dynamic:()=>d,runtime:()=>f});var i=r(9303),o=r(8716),n=r(670),u=r(1590),a=r.n(u),c=r(1139),p=r.n(c),l=r(214);let d="force-dynamic",f="nodejs";async function m(e){try{let{searchParams:t}=new URL(e.url),r=t.get("url")||"";if(!r||!a().validateURL(r))return new Response("Invalid URL",{status:400});let s={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36","Accept-Language":"en-US,en;q=0.9",Referer:"https://www.youtube.com/",Origin:"https://www.youtube.com"},i=await (0,l.J$)();i?s.Cookie=i:process.env.YT_COOKIE&&(s.Cookie=process.env.YT_COOKIE);let o=await a().getInfo(r,{requestOptions:{headers:s}}),n=p()(o.videoDetails.title||"video")||"video",u=o.formats.filter(e=>"mp4"===e.container&&e.hasAudio&&e.hasVideo),c=u.length>0?a().chooseFormat(u,{quality:"highest"}):a().chooseFormat(o.formats,{quality:"highest"}),d=a().downloadFromInfo(o,{format:c,requestOptions:{headers:s}}),{readable:f,writable:m}=new TransformStream,x=m.getWriter();d.on("data",e=>x.write(e)),d.on("end",()=>{try{x.close()}catch{}}),d.on("error",e=>{try{x.abort(e)}catch{}});let h=new Headers;h.set("Content-Type","video/mp4");let v=p()((n||"video").replace(/[^\x20-\x7E]/g,""))||"video",w=encodeURIComponent(`${n}.mp4`);return h.set("Content-Disposition",`attachment; filename="${v}.mp4"; filename*=UTF-8''${w}`),new Response(f,{headers:h})}catch(e){return new Response(e?.message||"Failed to download",{status:500})}}let x=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/download/video/route",pathname:"/api/download/video",filename:"route",bundlePath:"app/api/download/video/route"},resolvedPagePath:"C:\\Users\\Himadri\\Documents\\GitHub\\Youtube-Video-And-Music-Downloader\\app\\api\\download\\video\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:v,serverHooks:w}=x,q="/api/download/video/route";function y(){return(0,n.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:v})}},214:(e,t,r)=>{"use strict";r.d(t,{WL:()=>w,HQ:()=>q,J$:()=>x,bH:()=>v,lm:()=>h});let s=require("fs/promises");var i=r.n(s),o=r(5315),n=r.n(o);function u(){return!!(process.env.VERCEL||process.env.VERCEL_ENV)}let a="YT_COOKIE_STORED",c=function(){let e;let t=process.platform;return(e="win32"===t?process.env.APPDATA||process.env.LOCALAPPDATA||void 0:"darwin"===t?process.env.HOME?n().join(process.env.HOME,"Library","Application Support"):void 0:process.env.XDG_DATA_HOME||(process.env.HOME?n().join(process.env.HOME,".local","share"):void 0))?n().join(e,"yt-downloader"):n().join(process.cwd(),".data")}(),p=n().join(c,"yt_cookie.txt"),l=n().join(process.cwd(),".data"),d=n().join(l,"yt_cookie.txt");function f(e){return i().mkdir(e,{recursive:!0}).then(()=>{})}function m(e){let t={};for(let r of e.split(/\r?\n/)){let e=r.trim();if(!e||e.startsWith("#"))continue;let s=e.split(/\t+/);if(s.length>=7){let e=s[5],r=s.slice(6).join("	");e&&(t[e]=r);continue}let i=e.split(/\s+/);if(i.length>=7){let e=i[5],r=i.slice(6).join(" ");e&&(t[e]=r)}}return Object.entries(t).map(([e,t])=>`${e}=${t}`).join("; ")}async function x(){if(u())return process.env[a]||null;try{let e;try{e=await i().readFile(p,"utf8")}catch{try{let t=await i().readFile(d,"utf8");if(t&&t.trim())await f(c),await i().writeFile(p,t,"utf8"),e=t;else throw Error("No legacy cookie")}catch{return null}}if(!e.trim())return null;if(e.includes("	")||e.includes("Netscape"))return m(e)||null;return e.trim()}catch{return null}}async function h(e){let t=(e||"").trim();if(!t)throw Error("Cookie header is empty");if(u())throw Error("Cookie persistence not supported on Vercel. Use environment variable YT_COOKIE_STORED instead.");await f(c),await i().writeFile(p,t,"utf8")}async function v(e){let t=m(e||"");if(!t)throw Error("Parsed cookies.txt is empty or invalid");if(u())throw Error("Cookie persistence not supported on Vercel. Use environment variable YT_COOKIE_STORED instead.");await f(c),await i().writeFile(p,t,"utf8")}async function w(){if(u())throw Error("Cookie deletion not supported on Vercel. Remove YT_COOKIE_STORED environment variable instead.");try{await i().unlink(p)}catch{}}async function q(){if(u())return{exists:!!process.env[a],mtimeMs:Date.now()};try{let e=await i().stat(p);return{exists:!0,mtimeMs:e.mtimeMs}}catch{return{exists:!1}}}},1139:(e,t,r)=>{"use strict";var s=r(8971),i=/[\/\?<>\\:\*\|"]/g,o=/[\x00-\x1f\x80-\x9f]/g,n=/^\.+$/,u=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,a=/[\. ]+$/;function c(e,t){if("string"!=typeof e)throw Error("Input must be string");return s(e.replace(i,t).replace(o,t).replace(n,t).replace(u,t).replace(a,t),255)}e.exports=function(e,t){var r=t&&t.replacement||"",s=c(e,r);return""===r?s:c(s,"")}},8971:(e,t,r)=>{"use strict";var s=r(5027),i=Buffer.byteLength.bind(Buffer);e.exports=s.bind(null,i)},5027:e=>{"use strict";e.exports=function(e,t,r){if("string"!=typeof t)throw Error("Input must be string");for(var s,i,o,n=t.length,u=0,a=0;a<n;a+=1){if(i=t.charCodeAt(a),o=t[a],i>=55296&&i<=56319&&(s=t.charCodeAt(a+1))>=56320&&s<=57343&&(a+=1,o+=t[a]),(u+=e(o))===r)return t.slice(0,a+1);if(u>r)return t.slice(0,a-o.length+1)}return t}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,495],()=>r(3492));module.exports=s})();