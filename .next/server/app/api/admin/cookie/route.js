"use strict";(()=>{var e={};e.id=319,e.ids=[319],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5315:e=>{e.exports=require("path")},6005:e=>{e.exports=require("node:crypto")},9951:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>k,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>w});var n={};r.r(n),r.d(n,{DELETE:()=>d,GET:()=>p,POST:()=>f,dynamic:()=>c,runtime:()=>l});var i=r(9303),o=r(8716),s=r(670),a=r(214),u=r(9178);let c="force-dynamic",l="nodejs";async function p(e){let t=e.headers.get("cookie"),r=(0,u.SK)(t)[(0,u.Zk)()];if(!(0,u.g$)(r))return new Response("Unauthorized",{status:401});let[n,i]=await Promise.all([(0,a.J$)(),(0,a.HQ)()]);return Response.json({hasCookie:!!n,lastUpdatedMs:i.mtimeMs||null})}async function f(e){let t=e.headers.get("cookie"),r=(0,u.SK)(t)[(0,u.Zk)()];if(!(0,u.g$)(r))return new Response("Unauthorized",{status:401});try{if((e.headers.get("content-type")||"").includes("application/json")){let t=await e.json(),r=t.cookieHeader,n=t.cookiesTxt;if(r&&"string"==typeof r)await (0,a.lm)(r);else{if(!n||"string"!=typeof n)return new Response("Provide cookieHeader or cookiesTxt",{status:400});await (0,a.bH)(n)}return Response.json({ok:!0})}let t=await e.text();if(!t.trim())return new Response("Empty body",{status:400});return t.includes("	")||t.toLowerCase().includes("netscape")?await (0,a.bH)(t):await (0,a.lm)(t),Response.json({ok:!0})}catch(e){return new Response(e?.message||"Failed to save cookie",{status:400})}}async function d(e){let t=e.headers.get("cookie"),r=(0,u.SK)(t)[(0,u.Zk)()];return(0,u.g$)(r)?(await (0,a.WL)(),Response.json({ok:!0})):new Response("Unauthorized",{status:401})}let m=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/cookie/route",pathname:"/api/admin/cookie",filename:"route",bundlePath:"app/api/admin/cookie/route"},resolvedPagePath:"C:\\Users\\Himadri\\Documents\\GitHub\\Youtube-Video-And-Music-Downloader\\app\\api\\admin\\cookie\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:h,staticGenerationAsyncStorage:w,serverHooks:v}=m,y="/api/admin/cookie/route";function k(){return(0,s.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:w})}},9178:(e,t,r)=>{r.d(t,{FA:()=>m,P0:()=>a,SK:()=>h,Zk:()=>c,g$:()=>f,hJ:()=>d,kt:()=>p});var n=r(6005),i=r.n(n);let o="admin_session";function s(e){let t=process.env[e];return t&&String(t)}function a(){return s("ADMIN_PASSWORD")||null}function u(){return s("ADMIN_SECRET")||s("ADMIN_PASSWORD")||"default-insecure-secret-change-me"}function c(){return o}function l(e,t){return i().createHmac("sha256",e).update(t).digest("base64url")}function p(e=7){let t=Math.floor(Date.now()/1e3),r=JSON.stringify({iat:t,exp:t+86400*e,v:1}),n=Buffer.from(r,"utf8").toString("base64url"),i=l(u(),n);return`${n}.${i}`}function f(e){if(!e)return!1;let t=e.split(".");if(2!==t.length)return!1;let[r,n]=t,o=l(u(),r);if(!i().timingSafeEqual(Buffer.from(n),Buffer.from(o)))return!1;try{let e=Buffer.from(r,"base64url").toString("utf8"),t=JSON.parse(e);if("number"!=typeof t.exp)return!1;return Math.floor(Date.now()/1e3)<t.exp}catch{return!1}}function d(e){let t=[`${o}=${e}`,"Path=/","HttpOnly","SameSite=Lax"];return t.push("Secure"),t.push("Max-Age=604800"),t.join("; ")}function m(){let e=[`${o}=deleted`,"Path=/","HttpOnly","SameSite=Lax","Max-Age=0"];return e.push("Secure"),e.join("; ")}function h(e){let t={};return e&&e.split(";").forEach(e=>{let r=e.indexOf("=");if(-1===r)return;let n=e.slice(0,r).trim(),i=e.slice(r+1).trim();n&&(t[n]=i)}),t}},214:(e,t,r)=>{r.d(t,{WL:()=>y,HQ:()=>k,J$:()=>h,bH:()=>v,lm:()=>w});let n=require("fs/promises");var i=r.n(n),o=r(5315),s=r.n(o);function a(){return!!(process.env.VERCEL||process.env.VERCEL_ENV)}let u="YT_COOKIE_STORED",c=function(){let e;let t=process.platform;return(e="win32"===t?process.env.APPDATA||process.env.LOCALAPPDATA||void 0:"darwin"===t?process.env.HOME?s().join(process.env.HOME,"Library","Application Support"):void 0:process.env.XDG_DATA_HOME||(process.env.HOME?s().join(process.env.HOME,".local","share"):void 0))?s().join(e,"yt-downloader"):s().join(process.cwd(),".data")}(),l=s().join(c,"yt_cookie.txt"),p=s().join(process.cwd(),".data"),f=s().join(p,"yt_cookie.txt");function d(e){return i().mkdir(e,{recursive:!0}).then(()=>{})}function m(e){let t={};for(let r of e.split(/\r?\n/)){let e=r.trim();if(!e||e.startsWith("#"))continue;let n=e.split(/\t+/);if(n.length>=7){let e=n[5],r=n.slice(6).join("	");e&&(t[e]=r);continue}let i=e.split(/\s+/);if(i.length>=7){let e=i[5],r=i.slice(6).join(" ");e&&(t[e]=r)}}return Object.entries(t).map(([e,t])=>`${e}=${t}`).join("; ")}async function h(){if(a())return process.env[u]||null;try{let e;try{e=await i().readFile(l,"utf8")}catch{try{let t=await i().readFile(f,"utf8");if(t&&t.trim())await d(c),await i().writeFile(l,t,"utf8"),e=t;else throw Error("No legacy cookie")}catch{return null}}if(!e.trim())return null;if(e.includes("	")||e.includes("Netscape"))return m(e)||null;return e.trim()}catch{return null}}async function w(e){let t=(e||"").trim();if(!t)throw Error("Cookie header is empty");if(a())throw Error("Cookie persistence not supported on Vercel. Use environment variable YT_COOKIE_STORED instead.");await d(c),await i().writeFile(l,t,"utf8")}async function v(e){let t=m(e||"");if(!t)throw Error("Parsed cookies.txt is empty or invalid");if(a())throw Error("Cookie persistence not supported on Vercel. Use environment variable YT_COOKIE_STORED instead.");await d(c),await i().writeFile(l,t,"utf8")}async function y(){if(a())throw Error("Cookie deletion not supported on Vercel. Remove YT_COOKIE_STORED environment variable instead.");try{await i().unlink(l)}catch{}}async function k(){if(a())return{exists:!!process.env[u],mtimeMs:Date.now()};try{let e=await i().stat(l);return{exists:!0,mtimeMs:e.mtimeMs}}catch{return{exists:!1}}}},9303:(e,t,r)=>{e.exports=r(517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948],()=>r(9951));module.exports=n})();